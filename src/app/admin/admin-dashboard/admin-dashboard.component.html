<div class="dashboard-wrapper flex flex-col md:flex-row min-h-screen">
  <!-- Sidebar ridotta -->
  <div class="sidebar w-full md:w-56 lg:w-64 bg-blue-700 text-white p-4 flex-shrink-0">
    <h2 class="text-xl font-bold mb-4 text-center">Menu Admin</h2>
    <ul class="space-y-2 overflow-y-auto max-h-screen">
      <li><a href="#" class="block px-2 py-2 rounded hover:bg-blue-600">Dashboard</a></li>
      <li><a href="#" class="block px-2 py-2 rounded hover:bg-blue-600">Incarichi</a></li>
      <li><a href="#" class="block px-2 py-2 rounded hover:bg-blue-600">Clienti</a></li>
      <li><a href="#" class="block px-2 py-2 rounded hover:bg-blue-600">Operatori</a></li>
    </ul>
  </div>

  <!-- Contenuto principale -->
  <div class="main-content flex-1 bg-gray-100 p-4 md:p-6 overflow-auto">
    <!-- Contenuto originale della dashboard -->
    <div class="p-2 md:p-6">
      <h2 class="text-2xl font-bold mb-6">Dashboard Amministratore</h2>

      <!-- Form aggiungi incarico -->
      <form (ngSubmit)="addTask()" class="mb-6 p-4 border rounded-lg bg-gray-50">
        <h3 class="text-lg font-semibold mb-4">Nuovo incarico</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <!-- Descrizione -->
          <div>
            <label class="block text-sm font-medium mb-1">Descrizione</label>
            <input
              type="text"
              [(ngModel)]="newTask.description"
              name="description"
              class="form-control w-full"
              placeholder="Es: Pulizia cabina"
              required>
          </div>
          <!-- Cliente -->
          <div>
            <label class="block text-sm font-medium mb-1">Cliente</label>
            <input
              type="text"
              [(ngModel)]="newTask.clientName"
              name="clientName"
              class="form-control w-full"
              placeholder="Nome cliente"
              required>
          </div>
          <!-- Volo -->
          <div>
            <label class="block text-sm font-medium mb-1">Volo</label>
            <input
              type="text"
              [(ngModel)]="newTask.flight"
              name="flight"
              class="form-control w-full"
              placeholder="Es: AZ123"
              required>
          </div>
          <!-- Arrivo -->
          <div>
            <label class="block text-sm font-medium mb-1">Arrivo</label>
            <input
              type="text"
              [(ngModel)]="newTask.arrivalTime"
              name="arrivalTime"
              class="form-control w-full"
              placeholder="Es: 14:30"
              required>
          </div>
          <!-- Hotel -->
          <div>
            <label class="block text-sm font-medium mb-1">Hotel</label>
            <input
              type="text"
              [(ngModel)]="newTask.hotel"
              name="hotel"
              class="form-control w-full"
              placeholder="Nome hotel"
              required>
          </div>
          <!-- Operatore -->
          <div>
            <label class="block text-sm font-medium mb-1">Operatore</label>
            <select
              [(ngModel)]="newTask.operatorId"
              name="operatorId"
              class="form-control w-full">
              <option *ngFor="let op of operators" [value]="op.id">
                {{ op.name }}
              </option>
            </select>
          </div>
        </div>

        <!-- Pulsanti -->
        <div class="mt-4 flex flex-wrap gap-3">
          <button type="submit" class="btn btn-success px-4 py-2">Aggiungi</button>
          <button type="button" (click)="cancelTask()" class="btn btn-secondary px-4 py-2">Annulla</button>
        </div>
      </form>

      <!-- Tabella incarichi -->
      <div class="overflow-auto">
        <table class="min-w-full border-collapse border border-gray-300">
          <thead class="bg-gray-100">
            <tr>
              <th class="border border-gray-300 px-4 py-2">Descrizione</th>
              <th class="border border-gray-300 px-4 py-2">Cliente</th>
              <th class="border border-gray-300 px-4 py-2">Volo</th>
              <th class="border border-gray-300 px-4 py-2">Arrivo</th>
              <th class="border border-gray-300 px-4 py-2">Hotel</th>
              <th class="border border-gray-300 px-4 py-2">Operatore</th>
              <th class="border border-gray-300 px-4 py-2">Stato</th>
              <th class="border border-gray-300 px-4 py-2">Azioni</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let task of tasks">
              <td class="border border-gray-300 px-4 py-2">{{ task.description }}</td>
              <td class="border border-gray-300 px-4 py-2">{{ task.clientName }}</td>
              <td class="border border-gray-300 px-4 py-2">{{ task.flight }}</td>
              <td class="border border-gray-300 px-4 py-2">{{ task.arrivalTime }}</td>
              <td class="border border-gray-300 px-4 py-2">{{ task.hotel }}</td>
              <td class="border border-gray-300 px-4 py-2">{{ getOperatorName(task.operatorId) }}</td>
              <td class="border border-gray-300 px-4 py-2">
                <span class="px-2 py-1 text-xs rounded-full"
                      [class]="'bg-' + (task.status === 'completed' ? 'green' : 'yellow') + '-100 text-' + (task.status === 'completed' ? 'green' : 'yellow') + '-800'">
                  {{ task.status === 'completed' ? 'Completato' : 'In corso' }}
                </span>
              </td>
              <td class="border border-gray-300 px-4 py-2 text-center">
                <button
                  (click)="completeTask(task)"
                  [disabled]="task.status === 'completed'"
                  class="btn btn-success text-sm px-3 py-1">
                  Completa
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
